{% extends 'admin_panel/base.html' %}

{% block title %}Settings - Restaurant Admin Panel{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item active">Settings</li>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3">Settings</h1>
        <a href="/admin/core/restaurantsettings/" class="btn btn-outline-primary" target="_blank">
            <i class="fas fa-external-link-alt me-1"></i> Django Admin Settings
        </a>
    </div>

    <div class="row">
        <div class="col-lg-3 mb-4">
            <div class="card">
                <div class="card-body p-0">
                    <div class="list-group list-group-flush" id="settings-tabs" role="tablist">
                        <a class="list-group-item list-group-item-action active" id="general-tab" data-bs-toggle="list" href="#general" role="tab" aria-controls="general">
                            <i class="fas fa-cog me-2"></i> General Settings
                        </a>
                        <a class="list-group-item list-group-item-action" id="restaurant-tab" data-bs-toggle="list" href="#restaurant" role="tab" aria-controls="restaurant">
                            <i class="fas fa-store me-2"></i> Restaurant Information
                        </a>
                        <a class="list-group-item list-group-item-action" id="appearance-tab" data-bs-toggle="list" href="#appearance" role="tab" aria-controls="appearance">
                            <i class="fas fa-palette me-2"></i> Appearance
                        </a>
                        <a class="list-group-item list-group-item-action" id="email-tab" data-bs-toggle="list" href="#email" role="tab" aria-controls="email">
                            <i class="fas fa-envelope me-2"></i> Email Settings
                        </a>
                        <a class="list-group-item list-group-item-action" id="payment-tab" data-bs-toggle="list" href="#payment" role="tab" aria-controls="payment">
                            <i class="fas fa-credit-card me-2"></i> Payment Settings
                        </a>
                        <a class="list-group-item list-group-item-action" id="social-tab" data-bs-toggle="list" href="#social" role="tab" aria-controls="social">
                            <i class="fas fa-share-alt me-2"></i> Social Media
                        </a>
                        <a class="list-group-item list-group-item-action" id="seo-tab" data-bs-toggle="list" href="#seo" role="tab" aria-controls="seo">
                            <i class="fas fa-search me-2"></i> SEO Settings
                        </a>
                        <a class="list-group-item list-group-item-action" id="booking-tab" data-bs-toggle="list" href="#booking" role="tab" aria-controls="booking">
                            <i class="fas fa-calendar-alt me-2"></i> Booking Settings
                        </a>
                        <a class="list-group-item list-group-item-action" id="backup-tab" data-bs-toggle="list" href="#backup" role="tab" aria-controls="backup">
                            <i class="fas fa-database me-2"></i> Backup & Restore
                        </a>
                        <a class="list-group-item list-group-item-action" id="system-tab" data-bs-toggle="list" href="#system" role="tab" aria-controls="system">
                            <i class="fas fa-server me-2"></i> System Settings
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-9 mb-4">
            <div class="card">
                <div class="card-body">
                    <div class="tab-content">
                        <!-- General Settings -->
                        <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-tab">
                            <h5 class="mb-4">General Settings</h5>
                            <form method="post" action="{% url 'admin_panel:settings' %}">
                                {% csrf_token %}
                                <input type="hidden" name="section" value="general">
                                <div class="mb-3">
                                    <label for="site_title" class="form-label">Site Title</label>
                                    <input type="text" class="form-control" id="site_title" name="site_title" value="{{ settings.site_title }}">
                                </div>
                                <div class="mb-3">
                                    <label for="site_description" class="form-label">Site Description</label>
                                    <textarea class="form-control" id="site_description" name="site_description" rows="2">{{ settings.site_description }}</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="timezone" class="form-label">Timezone</label>
                                    <select class="form-select" id="timezone" name="timezone">
                                        <option value="UTC" {% if settings.timezone == 'UTC' %}selected{% endif %}>UTC</option>
                                        <option value="America/New_York" {% if settings.timezone == 'America/New_York' %}selected{% endif %}>America/New_York</option>
                                        <option value="Europe/London" {% if settings.timezone == 'Europe/London' %}selected{% endif %}>Europe/London</option>
                                        <option value="Asia/Tokyo" {% if settings.timezone == 'Asia/Tokyo' %}selected{% endif %}>Asia/Tokyo</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="currency" class="form-label">Currency</label>
                                    <select class="form-select" id="currency" name="currency">
                                        <option value="USD" {% if settings.currency == 'USD' %}selected{% endif %}>USD</option>
                                        <option value="EUR" {% if settings.currency == 'EUR' %}selected{% endif %}>EUR</option>
                                        <option value="GBP" {% if settings.currency == 'GBP' %}selected{% endif %}>GBP</option>
                                        <option value="JPY" {% if settings.currency == 'JPY' %}selected{% endif %}>JPY</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="currency_symbol" class="form-label">Currency Symbol</label>
                                    <input type="text" class="form-control" id="currency_symbol" name="currency_symbol" value="{{ settings.currency_symbol }}">
                                </div>
                                <div class="mb-3">
                                    <label for="tax_rate" class="form-label">Tax Rate</label>
                                    <div class="input-group">
                                        <input type="number" step="0.01" min="0" max="1" class="form-control" id="tax_rate" name="tax_rate" value="{{ settings.tax_rate }}">
                                        <span class="input-group-text">%</span>
                                    </div>
                                    <div class="form-text">Enter as a decimal (e.g., 0.08 for 8%)</div>
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>

                        <!-- Restaurant Information -->
                        <div class="tab-pane fade" id="restaurant" role="tabpanel" aria-labelledby="restaurant-tab">
                            <h5 class="mb-4">Restaurant Information</h5>
                            <form method="post" action="{% url 'admin_panel:settings' %}" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input type="hidden" name="section" value="restaurant">
                                <div class="mb-3">
                                    <label for="restaurant_name" class="form-label">Restaurant Name</label>
                                    <input type="text" class="form-control" id="restaurant_name" name="restaurant_name" value="{{ settings.restaurant_name }}">
                                </div>
                                <div class="mb-3">
                                    <label for="restaurant_logo" class="form-label">Restaurant Logo</label>
                                    {% if settings.restaurant_logo %}
                                    <div class="mb-2">
                                        <img src="{{ settings.restaurant_logo.url }}" alt="Restaurant Logo" style="max-height: 50px;" class="img-thumbnail">
                                    </div>
                                    {% endif %}
                                    <input type="file" class="form-control" id="restaurant_logo" name="restaurant_logo">
                                    <div class="form-text">Recommended size: 200x50 pixels</div>
                                </div>
                                <div class="mb-3">
                                    <label for="restaurant_address" class="form-label">Address</label>
                                    <textarea class="form-control" id="restaurant_address" name="restaurant_address" rows="3">{{ settings.restaurant_address }}</textarea>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="restaurant_phone" class="form-label">Phone Number</label>
                                        <input type="tel" class="form-control" id="restaurant_phone" name="restaurant_phone" value="{{ settings.restaurant_phone }}">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="restaurant_email" class="form-label">Email Address</label>
                                        <input type="email" class="form-control" id="restaurant_email" name="restaurant_email" value="{{ settings.restaurant_email }}">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="opening_hours" class="form-label">Opening Hours</label>
                                    <textarea class="form-control" id="opening_hours" name="opening_hours" rows="5">{{ settings.opening_hours }}</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="google_maps_embed" class="form-label">Google Maps Embed Code</label>
                                    <textarea class="form-control" id="google_maps_embed" name="google_maps_embed" rows="3">{{ settings.google_maps_embed }}</textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>

                        <!-- Appearance -->
                        <div class="tab-pane fade" id="appearance" role="tabpanel" aria-labelledby="appearance-tab">
                            <h5 class="mb-4">Appearance Settings</h5>
                            <form method="post" action="{% url 'admin_panel:settings' %}" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input type="hidden" name="section" value="appearance">
                                <div class="mb-3">
                                    <label for="primary_color" class="form-label">Primary Color</label>
                                    <input type="color" class="form-control form-control-color" id="primary_color" name="primary_color" value="{{ settings.primary_color }}">
                                </div>
                                <div class="mb-3">
                                    <label for="secondary_color" class="form-label">Secondary Color</label>
                                    <input type="color" class="form-control form-control-color" id="secondary_color" name="secondary_color" value="{{ settings.secondary_color }}">
                                </div>
                                <div class="mb-3">
                                    <label for="font_family" class="form-label">Font Family</label>
                                    <select class="form-select" id="font_family" name="font_family">
                                        <option value="Nunito" {% if settings.font_family == 'Nunito' %}selected{% endif %}>Nunito</option>
                                        <option value="Roboto" {% if settings.font_family == 'Roboto' %}selected{% endif %}>Roboto</option>
                                        <option value="Open Sans" {% if settings.font_family == 'Open Sans' %}selected{% endif %}>Open Sans</option>
                                        <option value="Lato" {% if settings.font_family == 'Lato' %}selected{% endif %}>Lato</option>
                                        <option value="Poppins" {% if settings.font_family == 'Poppins' %}selected{% endif %}>Poppins</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="hero_image" class="form-label">Hero Image</label>
                                    {% if settings.hero_image %}
                                    <div class="mb-2">
                                        <img src="{{ settings.hero_image.url }}" alt="Hero Image" style="max-height: 100px;" class="img-thumbnail">
                                    </div>
                                    {% endif %}
                                    <input type="file" class="form-control" id="hero_image" name="hero_image">
                                    <div class="form-text">Recommended size: 1920x1080 pixels</div>
                                </div>
                                <div class="mb-3">
                                    <label for="favicon" class="form-label">Favicon</label>
                                    {% if settings.favicon %}
                                    <div class="mb-2">
                                        <img src="{{ settings.favicon.url }}" alt="Favicon" style="max-height: 32px;" class="img-thumbnail">
                                    </div>
                                    {% endif %}
                                    <input type="file" class="form-control" id="favicon" name="favicon">
                                    <div class="form-text">Recommended size: 32x32 pixels</div>
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>

                        <!-- Email Settings -->
                        <div class="tab-pane fade" id="email" role="tabpanel" aria-labelledby="email-tab">
                            <h5 class="mb-4">Email Settings</h5>
                            <form method="post" action="{% url 'admin_panel:settings' %}">
                                {% csrf_token %}
                                <input type="hidden" name="section" value="email">
                                <div class="mb-3">
                                    <label for="smtp_host" class="form-label">SMTP Host</label>
                                    <input type="text" class="form-control" id="smtp_host" name="smtp_host" value="{{ settings.smtp_host }}">
                                </div>
                                <div class="mb-3">
                                    <label for="smtp_port" class="form-label">SMTP Port</label>
                                    <input type="number" class="form-control" id="smtp_port" name="smtp_port" value="{{ settings.smtp_port }}">
                                </div>
                                <div class="mb-3">
                                    <label for="smtp_username" class="form-label">SMTP Username</label>
                                    <input type="text" class="form-control" id="smtp_username" name="smtp_username" value="{{ settings.smtp_username }}">
                                </div>
                                <div class="mb-3">
                                    <label for="smtp_password" class="form-label">SMTP Password</label>
                                    <input type="password" class="form-control" id="smtp_password" name="smtp_password" value="{{ settings.smtp_password }}">
                                </div>
                                <div class="mb-3">
                                    <label for="email_from_address" class="form-label">From Email</label>
                                    <input type="email" class="form-control" id="email_from_address" name="email_from_address" value="{{ settings.email_from_address }}">
                                </div>
                                <div class="mb-3">
                                    <label for="email_from_name" class="form-label">From Name</label>
                                    <input type="text" class="form-control" id="email_from_name" name="email_from_name" value="{{ settings.email_from_name }}">
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                                <button type="button" class="btn btn-outline-primary ms-2">Send Test Email</button>
                            </form>
                        </div>

                        <!-- Payment Settings -->
                        <div class="tab-pane fade" id="payment" role="tabpanel" aria-labelledby="payment-tab">
                            <h5 class="mb-4">Payment Settings</h5>
                            <form method="post" action="{% url 'admin_panel:settings' %}">
                                {% csrf_token %}
                                <input type="hidden" name="section" value="payment">
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enable_stripe" name="enable_stripe" {% if settings.enable_stripe %}checked{% endif %}>
                                        <label class="form-check-label" for="enable_stripe">Enable Stripe</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="stripe_public_key" class="form-label">Stripe Public Key</label>
                                    <input type="text" class="form-control" id="stripe_public_key" name="stripe_public_key" value="{{ settings.stripe_public_key }}">
                                </div>
                                <div class="mb-3">
                                    <label for="stripe_secret_key" class="form-label">Stripe Secret Key</label>
                                    <input type="password" class="form-control" id="stripe_secret_key" name="stripe_secret_key" value="{{ settings.stripe_secret_key }}">
                                </div>
                                <hr class="my-4">
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enable_paypal" name="enable_paypal" {% if settings.enable_paypal %}checked{% endif %}>
                                        <label class="form-check-label" for="enable_paypal">Enable PayPal</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="paypal_client_id" class="form-label">PayPal Client ID</label>
                                    <input type="text" class="form-control" id="paypal_client_id" name="paypal_client_id" value="{{ settings.paypal_client_id }}">
                                </div>
                                <div class="mb-3">
                                    <label for="paypal_secret_key" class="form-label">PayPal Secret</label>
                                    <input type="password" class="form-control" id="paypal_secret_key" name="paypal_secret_key" value="{{ settings.paypal_secret_key }}">
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>

                        <!-- Social Media -->
                        <div class="tab-pane fade" id="social" role="tabpanel" aria-labelledby="social-tab">
                            <h5 class="mb-4">Social Media Settings</h5>
                            <form method="post" action="{% url 'admin_panel:settings' %}">
                                {% csrf_token %}
                                <input type="hidden" name="section" value="social">
                                <div class="mb-3">
                                    <label for="facebook_url" class="form-label">Facebook</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fab fa-facebook-f"></i></span>
                                        <input type="url" class="form-control" id="facebook_url" name="facebook_url" value="{{ settings.facebook_url }}">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="twitter_url" class="form-label">Twitter</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fab fa-twitter"></i></span>
                                        <input type="url" class="form-control" id="twitter_url" name="twitter_url" value="{{ settings.twitter_url }}">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="instagram_url" class="form-label">Instagram</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fab fa-instagram"></i></span>
                                        <input type="url" class="form-control" id="instagram_url" name="instagram_url" value="{{ settings.instagram_url }}">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="youtube_url" class="form-label">YouTube</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fab fa-youtube"></i></span>
                                        <input type="url" class="form-control" id="youtube_url" name="youtube_url" value="{{ settings.youtube_url }}">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="linkedin_url" class="form-label">LinkedIn</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fab fa-linkedin-in"></i></span>
                                        <input type="url" class="form-control" id="linkedin_url" name="linkedin_url" value="{{ settings.linkedin_url }}">
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>

                        <!-- Backup & Restore -->
                        <div class="tab-pane fade" id="backup" role="tabpanel" aria-labelledby="backup-tab">
                            <h5 class="mb-4">Backup & Restore</h5>
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h6 class="mb-0">Database Backup</h6>
                                </div>
                                <div class="card-body">
                                    <p>Create a backup of your database. This will export all your data including menu items, orders, bookings, etc.</p>
                                    <button type="button" class="btn btn-primary">Create Backup</button>
                                </div>
                            </div>
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h6 class="mb-0">Media Backup</h6>
                                </div>
                                <div class="card-body">
                                    <p>Create a backup of all your media files including images, documents, etc.</p>
                                    <button type="button" class="btn btn-primary">Backup Media Files</button>
                                </div>
                            </div>
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h6 class="mb-0">Restore Database</h6>
                                </div>
                                <div class="card-body">
                                    <p class="text-danger">Warning: Restoring a database will overwrite all existing data. Make sure you have a backup before proceeding.</p>
                                    <div class="mb-3">
                                        <label for="restore_file" class="form-label">Upload Backup File</label>
                                        <input type="file" class="form-control" id="restore_file">
                                    </div>
                                    <button type="button" class="btn btn-danger">Restore Database</button>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Scheduled Backups</h6>
                                </div>
                                <div class="card-body">
                                    <form method="post" action="{% url 'admin_panel:settings' %}">
                                        {% csrf_token %}
                                        <input type="hidden" name="section" value="backup">
                                        <div class="mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="enable_scheduled_backups" name="enable_scheduled_backups" {% if settings.enable_scheduled_backups %}checked{% endif %}>
                                                <label class="form-check-label" for="enable_scheduled_backups">Enable Scheduled Backups</label>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="backup_frequency" class="form-label">Backup Frequency</label>
                                            <select class="form-select" id="backup_frequency" name="backup_frequency">
                                                <option value="daily" {% if settings.backup_frequency == 'daily' %}selected{% endif %}>Daily</option>
                                                <option value="weekly" {% if settings.backup_frequency == 'weekly' %}selected{% endif %}>Weekly</option>
                                                <option value="monthly" {% if settings.backup_frequency == 'monthly' %}selected{% endif %}>Monthly</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="backup_retention_days" class="form-label">Backup Retention (days)</label>
                                            <input type="number" class="form-control" id="backup_retention_days" name="backup_retention_days" value="{{ settings.backup_retention_days }}">
                                        </div>
                                        <button type="submit" class="btn btn-primary">Save Settings</button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- SEO Settings -->
                        <div class="tab-pane fade" id="seo" role="tabpanel" aria-labelledby="seo-tab">
                            <h5 class="mb-4">SEO Settings</h5>
                            <form method="post" action="{% url 'admin_panel:settings' %}">
                                {% csrf_token %}
                                <input type="hidden" name="section" value="seo">
                                <div class="mb-3">
                                    <label for="meta_description" class="form-label">Meta Description</label>
                                    <textarea class="form-control" id="meta_description" name="meta_description" rows="3">{{ settings.meta_description }}</textarea>
                                    <div class="form-text">Recommended length: 150-160 characters</div>
                                </div>
                                <div class="mb-3">
                                    <label for="meta_keywords" class="form-label">Meta Keywords</label>
                                    <input type="text" class="form-control" id="meta_keywords" name="meta_keywords" value="{{ settings.meta_keywords }}">
                                    <div class="form-text">Separate keywords with commas</div>
                                </div>
                                <div class="mb-3">
                                    <label for="google_analytics_id" class="form-label">Google Analytics Tracking ID</label>
                                    <input type="text" class="form-control" id="google_analytics_id" name="google_analytics_id" value="{{ settings.google_analytics_id }}">
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>

                        <!-- Booking Settings -->
                        <div class="tab-pane fade" id="booking" role="tabpanel" aria-labelledby="booking-tab">
                            <h5 class="mb-4">Booking Settings</h5>
                            <form method="post" action="{% url 'admin_panel:settings' %}">
                                {% csrf_token %}
                                <input type="hidden" name="section" value="booking">

                                <h6 class="mt-4 mb-3">Booking Restrictions</h6>
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="min_booking_notice_hours" class="form-label">Minimum Notice (hours)</label>
                                        <input type="number" class="form-control" id="min_booking_notice_hours" name="min_booking_notice_hours" value="{{ booking_settings.min_booking_notice_hours }}" min="0">
                                        <div class="form-text">Minimum hours in advance for a booking</div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="max_booking_days_ahead" class="form-label">Maximum Days Ahead</label>
                                        <input type="number" class="form-control" id="max_booking_days_ahead" name="max_booking_days_ahead" value="{{ booking_settings.max_booking_days_ahead }}" min="1">
                                        <div class="form-text">Maximum days in advance for a booking</div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="default_booking_duration_mins" class="form-label">Default Duration (mins)</label>
                                        <input type="number" class="form-control" id="default_booking_duration_mins" name="default_booking_duration_mins" value="{{ booking_settings.default_booking_duration_mins }}" min="15" step="15">
                                        <div class="form-text">Default reservation duration in minutes</div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="min_party_size" class="form-label">Minimum Party Size</label>
                                        <input type="number" class="form-control" id="min_party_size" name="min_party_size" value="{{ booking_settings.min_party_size }}" min="1">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="max_party_size" class="form-label">Maximum Party Size</label>
                                        <input type="number" class="form-control" id="max_party_size" name="max_party_size" value="{{ booking_settings.max_party_size }}" min="1">
                                    </div>
                                </div>

                                <h6 class="mt-4 mb-3">Notifications</h6>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="send_confirmation_emails" name="send_confirmation_emails" {% if booking_settings.send_confirmation_emails %}checked{% endif %}>
                                        <label class="form-check-label" for="send_confirmation_emails">Send Confirmation Emails</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="send_reminder_emails" name="send_reminder_emails" {% if booking_settings.send_reminder_emails %}checked{% endif %}>
                                        <label class="form-check-label" for="send_reminder_emails">Send Reminder Emails</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="reminder_hours_before" class="form-label">Reminder Hours Before</label>
                                    <input type="number" class="form-control" id="reminder_hours_before" name="reminder_hours_before" value="{{ booking_settings.reminder_hours_before }}" min="1">
                                    <div class="form-text">Hours before reservation to send reminder</div>
                                </div>

                                <h6 class="mt-4 mb-3">Cancellation Policy</h6>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="allow_online_cancellation" name="allow_online_cancellation" {% if booking_settings.allow_online_cancellation %}checked{% endif %}>
                                        <label class="form-check-label" for="allow_online_cancellation">Allow Online Cancellation</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="cancellation_deadline_hours" class="form-label">Cancellation Deadline (hours)</label>
                                    <input type="number" class="form-control" id="cancellation_deadline_hours" name="cancellation_deadline_hours" value="{{ booking_settings.cancellation_deadline_hours }}" min="0">
                                    <div class="form-text">Hours before reservation when cancellation is no longer allowed</div>
                                </div>

                                <h6 class="mt-4 mb-3">Deposit Requirements</h6>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="require_deposit" name="require_deposit" {% if booking_settings.require_deposit %}checked{% endif %}>
                                        <label class="form-check-label" for="require_deposit">Require Deposit</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="deposit_amount" class="form-label">Deposit Amount</label>
                                        <div class="input-group">
                                            <span class="input-group-text">{{ settings.currency_symbol }}</span>
                                            <input type="number" step="0.01" min="0" class="form-control" id="deposit_amount" name="deposit_amount" value="{{ booking_settings.deposit_amount }}">
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="deposit_percentage" class="form-label">Deposit Percentage</label>
                                        <div class="input-group">
                                            <input type="number" step="0.01" min="0" max="100" class="form-control" id="deposit_percentage" name="deposit_percentage" value="{{ booking_settings.deposit_percentage }}">
                                            <span class="input-group-text">%</span>
                                        </div>
                                        <div class="form-text">Percentage of estimated bill</div>
                                    </div>
                                </div>

                                <h6 class="mt-4 mb-3">Automation</h6>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="auto_confirm_bookings" name="auto_confirm_bookings" {% if booking_settings.auto_confirm_bookings %}checked{% endif %}>
                                        <label class="form-check-label" for="auto_confirm_bookings">Auto-confirm Bookings</label>
                                    </div>
                                    <div class="form-text">When enabled, new bookings will be automatically confirmed</div>
                                </div>

                                <div class="mt-4">
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                    <a href="/admin/booking/bookingsettings/" class="btn btn-outline-primary ms-2" target="_blank">
                                        <i class="fas fa-external-link-alt me-1"></i> Django Admin Booking Settings
                                    </a>
                                </div>
                            </form>
                        </div>

                        <!-- System Settings -->
                        <div class="tab-pane fade" id="system" role="tabpanel" aria-labelledby="system-tab">
                            <h5 class="mb-4">System Settings</h5>
                            <form method="post" action="{% url 'admin_panel:settings' %}">
                                {% csrf_token %}
                                <input type="hidden" name="section" value="system">
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="maintenance_mode" name="maintenance_mode" {% if settings.maintenance_mode %}checked{% endif %}>
                                        <label class="form-check-label" for="maintenance_mode">Maintenance Mode</label>
                                    </div>
                                    <div class="form-text">When enabled, the site will display a maintenance message to visitors.</div>
                                </div>
                                <div class="mb-3">
                                    <label for="maintenance_message" class="form-label">Maintenance Message</label>
                                    <textarea class="form-control" id="maintenance_message" name="maintenance_message" rows="3">{{ settings.maintenance_message }}</textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                                <button type="button" class="btn btn-danger ms-2">Clear Cache</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
